repositories:
  - name: stable
    url: https://charts.helm.sh/stable

environments:
  default:
    values:
      - ./environments/dev/values.yaml
  development:
    values:
      - ./environments/dev/values.yaml
  staging:
    values:
      - ./environments/staging/values.yaml
  production:
    values:
      - ./environments/production/values.yaml
helmfiles:
  {{- range .Values.nodeInstances }}
  - path: 'charts/nginx/helmfile.yaml'
    values:
      - namespace: "protostar"
      - name: nginx-{{ .name }}
      - nginxServiceUrl: {{ .nginxServiceUrl }}
  - path: 'charts/node/helmfile.yaml'
    values:
      - namespace: "protostar"
      - name: {{ .name }}
  {{- end }}
